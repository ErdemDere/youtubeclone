{% extends 'base.html' %}

{% block content %}
<div class="subscriptions-page">
    <!-- Subscriptions Avatar Bar -->
    <div class="subs-avatar-bar">
        {% for sub in subscriptions %}
        <div class="sub-avatar-item">
            <div class="avatar-wrapper {% if sub.live %}live-ring{% endif %}">
                <img src="{{ sub.avatar }}" alt="{{ sub.name }}">
            </div>
            <span>{{ sub.name }}</span>
            {% if sub.live %}
            <div class="live-dot"></div>
            {% endif %}
        </div>
        {% endfor %}
        <button class="manage-subs-btn">Manage</button>
    </div>

    <!-- Subscriptions Videos -->
    <div class="history-section">
        <h2>Latest from your subscriptions</h2>
        {% if videos %}
        <div class="video-grid">
            {% for video in videos %}
            <a href="{% url 'watch' video.id %}" class="video-card-link">
                <div class="video-card">
                    <div class="thumbnail-container">
                        <img src="{{ video.thumbnail }}" alt="{{ video.title }}" class="thumbnail">
                        <span class="duration">{{ video.duration }}</span>
                    </div>
                    <div class="video-info">
                        <img src="{{ video.avatar }}" alt="{{ video.channel }}" class="channel-avatar">
                        <div class="video-details">
                            <h3 class="video-title">{{ video.title }}</h3>
                            <div class="channel-name">
                                {{ video.channel }}
                                <svg class="verified-badge" viewBox="0 0 24 24" width="14" height="14">
                                    <path fill="currentColor"
                                        d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zM9.8 17.3l-4.2-4.1L7 11.8l2.8 2.7L17 7.4l1.4 1.4-8.6 8.5z" />
                                </svg>
                            </div>
                            <div class="video-meta">{{ video.views }} â€¢ {{ video.time }}</div>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <p>No new videos from your subscriptions.</p>
        </div>
        {% endif %}
    </div>
</div>

<style>
    .subs-avatar-bar {
        display: flex;
        align-items: center;
        gap: 24px;
        padding: 16px 0;
        margin-bottom: 24px;
        overflow-x: auto;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        scrollbar-width: none;
    }

    .subs-avatar-bar::-webkit-scrollbar {
        display: none;
    }

    .sub-avatar-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        min-width: 80px;
    }

    .avatar-wrapper {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        overflow: hidden;
        position: relative;
        transition: transform 0.2s;
    }

    .sub-avatar-item:hover .avatar-wrapper {
        transform: scale(1.05);
    }

    .avatar-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .live-ring {
        padding: 2px;
        border: 2px solid #ff0000;
    }

    .sub-avatar-item span {
        font-size: 11px;
        color: var(--text-secondary);
        max-width: 70px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .manage-subs-btn {
        margin-left: auto;
        background: none;
        border: none;
        color: #3ea6ff;
        font-weight: 500;
        cursor: pointer;
        padding: 8px 16px;
    }

    .live-dot {
        width: 6px;
        height: 6px;
        background-color: #ff0000;
        border-radius: 50%;
        margin-top: -4px;
    }
</style>
{% endblock %}